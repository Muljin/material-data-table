<card overFlowX="visible">
  <app-background-blur *ngIf="loading"></app-background-blur>

  <h2 *ngIf="title" class="table-title">{{ title }}</h2>
  <div class="filters-container" *ngIf="filtersFormGroup">
    <table-filter
      [filterColumns]="filterColumns"
      [filterFormGroup]="filtersFormGroup"
      [isClientSideFilter]="isClientSide"
      (filterChange)="onFilterChange($event)"
    ></table-filter>
    <button mat-raised-button color="primary" (click)="openFilterDialog()">
      Filters
      <mat-icon class="btn-icon">filter_list</mat-icon>
    </button>
  </div>
  <div class="table-responsive">
    <table [dataSource]="dataSource" mat-table matSort aria-label="Elements">
      <ng-container
        *ngFor="let column of columns"
        [matColumnDef]="column.dataKey"
      >
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          [disabled]="!column.sort"
        >
          {{ column.label }}
        </th>
        <td
          [attr.data-testid]="column.dataKey + '-column'"
          mat-cell
          *matCellDef="let row"
        >
          <table-cell [column]="column" [row]="row"></table-cell>
        </td>
      </ng-container>

      <ng-container *ngIf="actions.length > 0" matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let row">
          <table-action
            *ngFor="let action of actions"
            [action]="action"
            [row]="row"
          ></table-action>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        (click)="onRowSelect(row)"
      ></tr>
    </table>
  </div>
  <div class="table-no-data" *ngIf="!dataSource.data.length">
    <h4>There is no data to display.</h4>
  </div>

  <mat-paginator
    #paginator
    [ngStyle]="{ visibility: pagination ? 'visible' : 'hidden' }"
    [length]="totalRecords"
    [pageSize]="pageSize"
    [pageIndex]="pageIndex"
    showFirstLastButtons
    (page)="onPageChange($event)"
    [pageSizeOptions]="pageSizes"
    aria-label="Select page"
  >
  </mat-paginator>
</card>
